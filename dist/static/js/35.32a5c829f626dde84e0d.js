webpackJsonp([35],{"+Zkb":function(e,n,t){(e.exports=t("UTlt")(!1)).push([e.i,"\n.el-input__inner::-webkit-input-placeholder {\n  color: #A9ADB7;\n}\n.el-input__inner::-moz-placeholder {\n  /* Mozilla Firefox 19+ */\n  color: #A9ADB7;\n}\n.el-input__inner:-moz-placeholder {\n  /* Mozilla Firefox 4 to 18 */\n  color: #A9ADB7;\n}\n.el-input__inner:-ms-input-placeholder {\n  /* Internet Explorer 10-11 */\n  color: #A9ADB7;\n}\n.el-checkbox__label {\n  padding-left: 6px;\n  font-size: 12px;\n}\n.el-checkbox {\n  font-size: 12px;\n  color: #545B6D;\n}\n.el-input {\n  font-size: 12px;\n}\ninput.el-input__inner {\n  border-color: #DFE5F1;\n}\nbutton.border-color {\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner {\n  width: 12px;\n  height: 12px;\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner::after {\n  top: 0;\n}\n.el-select-dropdown__item {\n  font-size: 12px;\n}\n/*主色为蓝色系*/\n/* @PrimaryBackgroundColor: hsl(hue(@PrimaryColor), 100%, 96%); */\n/*字体颜色*/\n/* 通用头部head部分样式 */\n/* @BorderColor: hsl(hue(@PrimaryColor), 20%, 80%); */\n/* table */\n/* @ThBackgroundColor: hsl(hue(@PrimaryColor)+12, 33%, 96%); */\n/* detail列表详情下的table */\n/* detail列表详情下的slide-section */\n/* detail列表详情下的slide-section 时光轴样式 */\n.la-list {\n  background-color: #fff;\n}\n.el-tabs__header {\n  padding-left: 14px;\n  margin: 0px;\n}\n.el-tabs__content {\n  overflow: visible;\n}\n.el-tabs__active-bar {\n  height: 3px;\n  border-radius: 5px;\n}\n.el-tabs__item {\n  padding: 0 14px;\n}\n",""])},"0thU":function(e,n,t){var a=t("+Zkb");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("FIqI")("4b1a8e01",a,!0,{})},T8Hx:function(e,n,t){var a=t("L4zZ");(e.exports=t("UTlt")(!1)).push([e.i,"\n.el-input__inner::-webkit-input-placeholder {\n  color: #A9ADB7;\n}\n.el-input__inner::-moz-placeholder {\n  /* Mozilla Firefox 19+ */\n  color: #A9ADB7;\n}\n.el-input__inner:-moz-placeholder {\n  /* Mozilla Firefox 4 to 18 */\n  color: #A9ADB7;\n}\n.el-input__inner:-ms-input-placeholder {\n  /* Internet Explorer 10-11 */\n  color: #A9ADB7;\n}\n.el-checkbox__label {\n  padding-left: 6px;\n  font-size: 12px;\n}\n.el-checkbox {\n  font-size: 12px;\n  color: #545B6D;\n}\n.el-input {\n  font-size: 12px;\n}\ninput.el-input__inner {\n  border-color: #DFE5F1;\n}\nbutton.border-color {\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner {\n  width: 12px;\n  height: 12px;\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner::after {\n  top: 0;\n}\n.el-select-dropdown__item {\n  font-size: 12px;\n}\n/*主色为蓝色系*/\n/* @PrimaryBackgroundColor: hsl(hue(@PrimaryColor), 100%, 96%); */\n/*字体颜色*/\n/* 通用头部head部分样式 */\n/* @BorderColor: hsl(hue(@PrimaryColor), 20%, 80%); */\n/* table */\n/* @ThBackgroundColor: hsl(hue(@PrimaryColor)+12, 33%, 96%); */\n/* detail列表详情下的table */\n/* detail列表详情下的slide-section */\n/* detail列表详情下的slide-section 时光轴样式 */\n.la-ypmc {\n  min-height: 100px;\n}\n.la-ypmc .no-data-msg {\n  width: 100%;\n  text-align: center;\n  font-weight: bold;\n}\n.extensible-table .extensible-td {\n  cursor: pointer;\n  text-decoration: underline;\n}\n.extensible-table .extensible-td:hover {\n  color: #4877e8;\n  font-weight: normal;\n}\n.extensible-table tr.el-table__row--striped td.active {\n  color: #4877e8;\n  font-weight: 600;\n  background: url("+a(t("2+JL"))+") no-repeat 30px bottom #f5f8fb !important;\n  border: none;\n}\n.extensible-table td {\n  position: relative;\n}\n.extensible-table td .el-icon-caret-top {\n  font-size: 20px;\n  display: none;\n}\n.extensible-table td.active {\n  color: #4877e8;\n  font-weight: 600;\n  background: url("+a(t("2+JL"))+") no-repeat 30px bottom;\n  border: none;\n}\n.sub-table-type {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 5px 10px;\n}\n.sub-table-type_item {\n  width: 50px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 13px;\n  text-align: center;\n  margin-right: 10px;\n  border-radius: 4px;\n  border: 1px solid #4877e8;\n  color: #4877e8;\n  cursor: pointer;\n}\n.sub-table-type_item.set {\n  color: #fff;\n  background-color: #4877e8;\n}\n.el-table__expanded-cell .el-table th.is-leaf {\n  background-color: #EAEEF9 !important;\n}\n",""])},VxbJ:function(e,n,t){var a=t("L4zZ");(e.exports=t("UTlt")(!1)).push([e.i,"\n.el-input__inner::-webkit-input-placeholder {\n  color: #A9ADB7;\n}\n.el-input__inner::-moz-placeholder {\n  /* Mozilla Firefox 19+ */\n  color: #A9ADB7;\n}\n.el-input__inner:-moz-placeholder {\n  /* Mozilla Firefox 4 to 18 */\n  color: #A9ADB7;\n}\n.el-input__inner:-ms-input-placeholder {\n  /* Internet Explorer 10-11 */\n  color: #A9ADB7;\n}\n.el-checkbox__label {\n  padding-left: 6px;\n  font-size: 12px;\n}\n.el-checkbox {\n  font-size: 12px;\n  color: #545B6D;\n}\n.el-input {\n  font-size: 12px;\n}\ninput.el-input__inner {\n  border-color: #DFE5F1;\n}\nbutton.border-color {\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner {\n  width: 12px;\n  height: 12px;\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner::after {\n  top: 0;\n}\n.el-select-dropdown__item {\n  font-size: 12px;\n}\n/*主色为蓝色系*/\n/* @PrimaryBackgroundColor: hsl(hue(@PrimaryColor), 100%, 96%); */\n/*字体颜色*/\n/* 通用头部head部分样式 */\n/* @BorderColor: hsl(hue(@PrimaryColor), 20%, 80%); */\n/* table */\n/* @ThBackgroundColor: hsl(hue(@PrimaryColor)+12, 33%, 96%); */\n/* detail列表详情下的table */\n/* detail列表详情下的slide-section */\n/* detail列表详情下的slide-section 时光轴样式 */\n.la-ypmc {\n  min-height: 100px;\n}\n.la-ypmc .no-data-msg {\n  width: 100%;\n  text-align: center;\n  font-weight: bold;\n}\n.extensible-table .extensible-td {\n  cursor: pointer;\n  text-decoration: underline;\n}\n.extensible-table .extensible-td:hover {\n  color: #4877e8;\n  font-weight: normal;\n}\n.extensible-table tr.el-table__row--striped td.active {\n  color: #4877e8;\n  font-weight: 600;\n  background: url("+a(t("2+JL"))+") no-repeat 30px bottom #f5f8fb !important;\n  border: none;\n}\n.extensible-table td {\n  position: relative;\n}\n.extensible-table td .el-icon-caret-top {\n  font-size: 20px;\n  display: none;\n}\n.extensible-table td.active {\n  color: #4877e8;\n  font-weight: 600;\n  background: url("+a(t("2+JL"))+") no-repeat 30px bottom;\n  border: none;\n}\n.sub-table-type {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 5px 10px;\n}\n.sub-table-type_item {\n  width: 50px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 13px;\n  text-align: center;\n  margin-right: 10px;\n  border-radius: 4px;\n  border: 1px solid #4877e8;\n  color: #4877e8;\n  cursor: pointer;\n}\n.sub-table-type_item.set {\n  color: #fff;\n  background-color: #4877e8;\n}\n.el-table__expanded-cell .el-table th.is-leaf {\n  background-color: #eaeef9 !important;\n}\n",""])},Y6oZ:function(e,n,t){(e.exports=t("UTlt")(!1)).push([e.i,"\n.el-input__inner::-webkit-input-placeholder {\n  color: #A9ADB7;\n}\n.el-input__inner::-moz-placeholder {\n  /* Mozilla Firefox 19+ */\n  color: #A9ADB7;\n}\n.el-input__inner:-moz-placeholder {\n  /* Mozilla Firefox 4 to 18 */\n  color: #A9ADB7;\n}\n.el-input__inner:-ms-input-placeholder {\n  /* Internet Explorer 10-11 */\n  color: #A9ADB7;\n}\n.el-checkbox__label {\n  padding-left: 6px;\n  font-size: 12px;\n}\n.el-checkbox {\n  font-size: 12px;\n  color: #545B6D;\n}\n.el-input {\n  font-size: 12px;\n}\ninput.el-input__inner {\n  border-color: #DFE5F1;\n}\nbutton.border-color {\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner {\n  width: 12px;\n  height: 12px;\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner::after {\n  top: 0;\n}\n.el-select-dropdown__item {\n  font-size: 12px;\n}\n/*主色为蓝色系*/\n/* @PrimaryBackgroundColor: hsl(hue(@PrimaryColor), 100%, 96%); */\n/*字体颜色*/\n/* 通用头部head部分样式 */\n/* @BorderColor: hsl(hue(@PrimaryColor), 20%, 80%); */\n/* table */\n/* @ThBackgroundColor: hsl(hue(@PrimaryColor)+12, 33%, 96%); */\n/* detail列表详情下的table */\n/* detail列表详情下的slide-section */\n/* detail列表详情下的slide-section 时光轴样式 */\n.la-slh {\n  min-height: 100px;\n}\n.la-slh .no-data-msg {\n  width: 100%;\n  text-align: center;\n  font-weight: bold;\n}\n.yxsp-icon {\n  display: inline-block;\n  font-size: 9px;\n  padding: 1px;\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  color: #fff;\n  border-radius: 8px;\n  background: #90c320;\n}\n.zdzx-icon {\n  display: inline-block;\n  font-size: 9px;\n  padding: 1px;\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  color: #fff;\n  border-radius: 8px;\n  background: #4877e8;\n}\n.tssp-icon {\n  display: inline-block;\n  font-size: 9px;\n  padding: 1px;\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  color: #fff;\n  border-radius: 8px;\n  background: #f5a623;\n}\n.v-modal {\n  background: rgba(102, 102, 102, 0.4);\n}\n",""])},dSaI:function(e,n,t){var a=t("xns6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("FIqI")("a24f1366",a,!0,{})},oOaS:function(e,n,t){var a=t("T8Hx");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("FIqI")("3be5a65e",a,!0,{})},rjR4:function(e,n,t){var a=t("Y6oZ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("FIqI")("27ec3d60",a,!0,{})},t2zo:function(e,n,t){var a=t("VxbJ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("FIqI")("31fec54e",a,!0,{})},tTMa:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("4YfN"),o=t.n(a),s=t("2JG8"),i=t("NZk2"),r=t("tF2W"),l=t("bSIt"),d=t("nYX6"),p=t("NAxV"),c=t("PKHo"),u=t("cg4i"),h=d.a.yyxs.year,x={components:{TooltipBD:s.a,List:r.a,Export:i.a,listCheck:p.a},mixins:[c.a,u.a],data:function(){return{defaultFiled:h,tableHead:[],vuex_name:"Yyxs",checkallShow:[],show_table:!0,changeStyle:"",tableHeight:document.documentElement.clientHeight-48-60-60-50-88}},computed:o()({},Object(l.b)({allBase:function(e){return e.Yyxs.allBase},tableconf:function(e){return e.Yyxs.tableconf},res1:function(e){return _.keys(e.Yyxs.res1).length?e.Yyxs.res1.res:[]},errocode:function(e){return e.Yyxs.error},listLoading:function(e){return e.Yyxs.listLoading},params:function(e){return e.Yyxs.putong},words:function(e){return e.Yyxs.gaoji},group:function(e){return e.Yyxs.shaixuan},extendCount:function(e){return e.Yyxs.extendCount},nopms:function(e){return e.Yyxs.nopms},param:function(e){return e.Yyxs.year_param},order:function(e){return e.Yyxs.order}})),methods:{sendGa:function(){this.nopms&&!this.nopms.ksh&&(window.ga("send","event","tab","click","yyxs_analy"),window._paq.push(["trackEvent","tab","click","yyxs_analy"]),this.$router.push({path:"/yyxs/analy"}))},init:function(){this.tableHead=this.defaultFiled.reduce(function(e,n){return n.checked&&e.push(n),e},[])},handleCurrentChange:function(e){this.param.page=e,e*this.param.pageSize<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleSizeChange:function(e){this.param.page=1,this.param.pageSize=e,e*this.param.page<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()}},created:function(){this.init()},mounted:function(){},updated:function(){this.vueTogglePmsTooltip()},activated:function(){this.registerEven()},watch:{res1:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()})},immediate:!0},tableHead:{handler:function(e,n){var t=this;this.$nextTick(function(){t.registerEven()})},immediate:!0},tableconf:function(e){this.defaultFiled=this.tableheaderCombain(e,this.defaultFiled)},checkedFiled:function(){var e=this;this.tableHead=[],this.defaultFiled=_.map(h,function(n){return-1!=e.checkedFiled.indexOf(n.prop)?(n.checked=!0,e.tableHead.push(n)):n.checked=!1,n})}}},f={render:function(){var e=this,n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"la-slh"},[a("List",{attrs:{loading:n.listLoading,nodata:n.res1&&!n.res1.length}},[a("div",{staticClass:"actions"},[a("span",{staticClass:"action-btn",class:{"abandon-click-method":n.nopms&&n.nopms.ksh},on:{click:n.sendGa}},[a("span",{staticClass:"icon iconfont"},[n._v("")]),n._v(" "),a("span",{staticStyle:{"line-height":"1"}},[n._v("智能分析")])]),n._v(" "),a("list-check",{staticStyle:{"text-align":"left"},attrs:{defaultFiled:n.defaultFiled,vuex_name:"Yyxs",showArray:n.tableHead},on:{changeTableHeader:function(t){return n.changeTableHeader(e,t)}}}),n._v(" "),a("Export",{staticStyle:{"text-align":"left"},attrs:{out_max:n.allBase.out_max,vuex_name:"Yyxs",api_name:"yyxs",max_num:n.extendCount.listCount,defaultFiled:n.defaultFiled,outdataAction:"base"}})],1),n._v(" "),n.show_table?a("el-table",{ref:"ElTable",staticClass:"table",staticStyle:{width:"100%"},attrs:{height:n.tableHeight,data:n.res1,stripe:"",fixed:"","default-sort":n.order.base?n.defaultSort(n.order.base):{}},on:{"sort-change":n.sortChange}},n._l(n.tableHead,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,"min-width":e.field_width||e.width||100,sortable:e.sort,label:e.label},scopedSlots:n._u([{key:e.tips?"header":"",fn:function(t){return[a("span",[n._v("\n            "+n._s(e.label)+"\n            "),a("el-tooltip",{attrs:{effect:"zhuce",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[n._v("为最小制剂单位的销量，例如片、丸、粒、袋、支、瓶等")]),n._v(" "),a("i",{staticClass:"el-icon-question cl-green",staticStyle:{"margin-left":"4px"}})])],1)]}},{key:"default",fn:function(t){return["targets"===e.prop?a("div",[a("TooltipBD",{attrs:{targets:t.row.targets,targets_abbr:t.row.targets_abbr}})],1):a("div",{attrs:{title:t.row[e.prop]}},[n.vueCheckListPms("Yyxs",e.label)?a("span",[n._v(n._s("sale"===e.prop?n.echartsTooltipMoney(t.row[e.prop]):"amount"===e.prop?n.echartsTooltipMoney(t.row[e.prop],1):t.row[e.prop]?t.row[e.prop]:"-"))]):a("span",{staticClass:"abandon-click-method"},[n._v("暂无权限")])])]}}],null,!0)})}),1):n._e(),n._v(" "),a("div",{staticStyle:{positon:"relative"}},[n.extendCount.listCount?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":n.param.page,"page-sizes":[20,30,50],"page-size":n.param.pageSize,layout:"total, sizes, prev, pager, next",total:n.extendCount.listCount,disabled:n.nopms.fy},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}}):n._e(),n._v(" "),a("span",{staticClass:"out-of-page cl-red"},[n._v("限于内容篇幅，部分结果未予显示")])],1)],1)],1)},staticRenderFns:[]};var m=t("C7Lr")(x,f,!1,function(e){t("rjR4")},null,null).exports,b=t("aA9S"),y=t.n(b),g=t("ZJ3O"),w=d.a.yyxs.yptym,v={components:{LoadingGif:g.a,List:r.a,Export:i.a,listCheck:p.a},mixins:[c.a,u.a],data:function(){return{expand_type:"sale",scope:"",defaultFiled:w,expandFiled:[],expandAmountFiled:[],tableHead:[],checkallShow:[],show_table:!0,getRowKeys:function(e){return e.guifanname},expandParams:{name:"",pageSize:20,page:1},expands:{expandsrow:[],element:null,expanCell:"",expandRes:{},erroCode:"200"},expandsLoading:!0,changeStyle:"",tableHeight:document.documentElement.clientHeight-48-60-60-50-88}},computed:o()({},Object(l.b)({allBase:function(e){return e.Yyxs.allBase},tableconf:function(e){return e.Yyxs.tableconf},nopms:function(e){return e.Yyxs.nopms},res2:function(e){return _.keys(e.Yyxs.res2).length?e.Yyxs.res2.res:[]},errocode:function(e){return e.Yyxs.error},listLoading:function(e){return e.Yyxs.listLoading},params:function(e){return e.Yyxs.putong},words:function(e){return e.Yyxs.gaoji},group:function(e){return e.Yyxs.shaixuan},extendCount:function(e){return e.Yyxs.extendCount},param:function(e){return e.Yyxs.name_param},search_api_param:function(e){return e.Yyxs.search_api_param},accesstoken:function(e){return e.UserCenter.accesstoken},order:function(e){return e.Yyxs.order}})),methods:{sendGa:function(){this.nopms&&!this.nopms.ksh&&(window.ga("send","event","tab","click","yyxs_analy"),window._paq.push(["trackEvent","tab","click","yyxs_analy"]),this.$router.push({path:"/yyxs/analy"}))},showAnaly:function(e){this.$store.commit("Yyxs/dlfx_nowNav","检品分析"),this.$store.commit("Yyxs/dlfx_searchValYp",e),this.$store.commit("Yyxs/dlfx_searchListYp",[{label:e,value:e}])},init:function(){this.tableHead=this.defaultFiled.reduce(function(e,n){return n.checked&&e.push(n),e},[])},handleCurrentChange:function(e){this.param.page=e,e*this.param.pageSize<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleSizeChange:function(e){this.param.page=1,this.param.pageSize=e,e*this.param.page<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleRequest:function(e){var n=this;Store.dispatch("Yyxs/getGroupRes",{path:"/api/yyxs/byname",params:this.expandParams}).then(function(t){if(n.expandsLoading=!1,404==t.data.code)n.expands.erroCode="404";else if(200==t.data.code){n.expands.erroCode="200";var a=t.data.data;n.expands.expandRes=a;var o=_.clone(a.res);a.res=n.tableData(o),a.amount=n.tableAmountData(o),n.$set(e.row.second,[n.scope],a),$(".el-table").addClass("el-table--scrollable-y")}}).catch(function(e){n.expandsLoading=!1,n.expands.erroCode="500"})},expandCurrentChange:function(e,n){this.expandParams.page=e,this.handleRequest(n)},sortChange:function(e,n,t){var a=void 0;e.prop&&(a=e.prop+" "+("descending"==e.order?"desc":"asc")),this.param.order=a,Store.commit("Yyxs/order",y()({},this.$store.state.Yyxs.order,{name:a||null})),Store.dispatch("Yyxs/nomalSearch",{params:this.param})},getExpandRes:function(e,n,t,a,o){if(t){var s=void 0;switch(a){case"规格":s=1;break;case"生产企业":s=2;break;case"区域":s=3;break;case"省份":s=4}if(this.expandFiled[0]={prop:"field",label:a,width:100,checked:!0},this.expandFiled[1]={prop:"dw",label:"销售额单位",width:100,checked:!0},this.expandParams.name=e,this.expandParams.tp=s,this.expandParams.pageSize=20,this.expandParams.page=1,this.expandParams.accesstoken=this.accesstoken,this.scope=o.column.property,o.row.second[this.scope])return void this.$set(o.row.second,[this.scope],o.row.second[this.scope]);this.expandsLoading=!0,this.handleRequest(o)}},tableData:function(e){var n=this,t=this.expandFiled.slice(0,2),a=[];return _.forEach(e,function(e,o){var s=e.year.split(","),i={};_.forEach(s,function(e){var a=e.split(":"),o=a[0],s=a[1];o&&(i[o]=n.echartsTooltipMoney(s),t.every(function(e){return e.label!=o})&&t.push({prop:o,label:o,width:100,checked:!0}))}),a.push(_.assign({field:e.field},i))}),t.sort(function(e,n){return e.label-n.label}),this.expandFiled=t,a},tableAmountData:function(e){var n=this,t=this.expandFiled.slice(0,1).concat({prop:"dw",label:"销售量单位",width:100,checked:!0}),a=[];return _.forEach(e,function(e,o){var s=e.year_amount.split(","),i={};_.forEach(s,function(e){var a=e.split(":"),o=a[0],s=a[1];o&&(i[o]=n.echartsTooltipMoney(s),t.every(function(e){return e.label!=o})&&t.push({prop:o,label:o,width:100,checked:!0}))}),a.push(_.assign({field:e.field},i))}),t.sort(function(e,n){return e.label-n.label}),this.expandAmountFiled=t,a},switchExpandType:function(e){this.expand_type=e},toggleRowExpansion:function(e,n,t,a){if("td"!==a.target.localName&&"cell"!==a.target.className&&(window.ga("send","event","txt","click","yyxs__byname_"+n.property),window._paq.push(["trackEvent","txt","click","yyxs__byname_"+n.property]),Number($(t).text().trim()))){var o=!1,s=($(t).index(),$(t).parent().index());this.expands.old_row>=0&&this.expands.old_row==s&&(o=!0),this.expands.old_row=s;var i=$(t);this.expands.element||(this.expands.element=i),this.expands.expandsrow=[],n.id==this.expands.expanCell&&o?(i.hasClass("active")?this.expands.element.removeClass("active"):this.expands.element.addClass("active"),this.expands.expanCell="",this.expandParams.page=1):(this.expands.expanCell=n.id,this.expands.expandsrow.push(e.guifanname),this.expands.element.removeClass("active"),i.addClass("active"),this.expands.element=i)}}},created:function(){this.init()},mounted:function(){},activated:function(){this.registerEven()},watch:{res2:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()}),this.expands={expandsrow:[],element:null,expanCell:"",expandRes:{},erroCode:"200"}},immediate:!0},tableHead:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()})},immediate:!0},checkedFiled:function(){var e=this;this.tableHead=[],this.defaultFiled=_.map(w,function(n){return-1!=e.checkedFiled.indexOf(n.prop)?(n.checked=!0,e.tableHead.push(n)):n.checked=!1,n})}}},k={render:function(){var e=this,n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"la-ypmc"},[a("List",{attrs:{loading:n.listLoading,nodata:n.res2&&!n.res2.length}},[a("div",{staticClass:"actions"},[a("span",{staticClass:"action-btn",class:{"abandon-click-method":n.nopms&&n.nopms.ksh},on:{click:n.sendGa}},[a("span",{staticClass:"icon iconfont"},[n._v("")]),n._v(" "),a("span",{staticStyle:{"line-height":"1"}},[n._v("智能分析")])]),n._v(" "),a("list-check",{staticStyle:{"text-align":"left"},attrs:{defaultFiled:n.defaultFiled,vuex_name:"Yyxs",showArray:n.tableHead},on:{changeTableHeader:function(t){return n.changeTableHeader(e,t)}}}),n._v(" "),a("Export",{staticStyle:{"text-align":"left"},attrs:{out_max:n.allBase.out_max,vuex_name:"Yyxs",api_name:"yyxs",max_num:n.extendCount.nameCount,defaultFiled:n.defaultFiled,outdataAction:"name"}})],1),n._v(" "),n.show_table?a("el-table",{ref:"ElTable",staticClass:"table extensible-table",staticStyle:{width:"100%"},attrs:{height:n.tableHeight,data:n.res2,stripe:"",fixed:"","row-key":n.getRowKeys,"expand-row-keys":n.expands.expandsrow,"default-sort":n.order.name?n.defaultSort(n.order.name):{}},on:{"cell-click":n.toggleRowExpansion,"sort-change":n.sortChange}},[a("el-table-column",{attrs:{type:"expand",width:"1"},scopedSlots:n._u([{key:"default",fn:function(e){return a("div",{staticClass:"table-expand",attrs:{type:"expand"}},[n.expandsLoading?a("LoadingGif",{attrs:{className:"list-in-loading",classNameImg:"little-size-loading",loadFlag:n.expandsLoading}}):a("div",[a("div",{staticClass:"sub-table-type"},[a("span",{class:["sub-table-type_item","sale"==n.expand_type?"set":""],on:{click:function(e){return n.switchExpandType("sale")}}},[n._v("销售额")]),n._v(" "),a("span",{class:["sub-table-type_item","amount"==n.expand_type?"set":""],on:{click:function(e){return n.switchExpandType("amount")}}},[n._v("销售量")])]),n._v(" "),"sale"==n.expand_type?[a("el-table",{ref:"expandtable",staticClass:"expand-table",staticStyle:{width:"100%"},attrs:{data:e.row.second[n.scope].res,fixed:""}},n._l(n.expandFiled,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.field_width||e.width||100,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return["dw"===e.prop?a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      万元\n                    ")]):a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      "+n._s(t.row[e.prop]||"-")+"\n                    ")])]}}],null,!0)})}),1),n._v(" "),e.row.second[n.scope].count>20?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":e.row.second[n.scope].page,"page-size":20,layout:"prev, next",total:e.row.second[n.scope].count,disabled:n.nopms.fy},on:{"current-change":function(t){return n.expandCurrentChange(t,e)}}}):n._e()]:n._e(),n._v(" "),"amount"==n.expand_type?[a("el-table",{ref:"expandtable",staticClass:"expand-table",staticStyle:{width:"100%"},attrs:{data:e.row.second[n.scope].amount,fixed:""}},n._l(n.expandAmountFiled,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.field_width||e.width||100,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return["dw"===e.prop?a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      万(片/粒/袋/支)\n                    ")]):a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      "+n._s(t.row[e.prop]||"-")+"\n                    ")])]}}],null,!0)})}),1),n._v(" "),e.row.second[n.scope].count>20?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":e.row.second[n.scope].page,"page-size":20,layout:"prev, next",total:e.row.second[n.scope].count,disabled:n.nopms.fy},on:{"current-change":function(t){return n.expandCurrentChange(t,e)}}}):n._e()]:n._e()],2)],1)}}],null,!1,2044609725)}),n._v(" "),n._l(n.tableHead,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.width,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return[a("div",{attrs:{title:t.row[e.prop]}},["ypfx"===e.prop?a("div",{on:{click:function(e){return n.showAnaly(t.row.guifanname)}}},[a("router-link",{staticClass:"cl-blue",attrs:{target:"_blank",to:{path:"/yyxsdata",query:{tab:"1",type_id:2,ypname:t.row.guifanname,type:"2"}}}},[n._v("药品分析")])],1):a("div",{class:{"extensible-td":Number(t.row[e.prop])},on:{click:function(a){"guifanname"!=e.prop&&n.getExpandRes(t.row.guifanname,e.prop,t.row[e.prop],e.label,t)}}},[n._v("\n              "+n._s(t.row[e.prop])+"\n            ")])])]}}],null,!0)})})],2):n._e(),n._v(" "),a("div",{staticStyle:{positon:"relative"}},[n.extendCount.nameCount?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":n.param.page,"page-sizes":[20,30,50],"page-size":20,layout:"total, sizes, prev, pager, next",total:n.extendCount.nameCount,disabled:n.nopms.fy},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}}):n._e(),n._v(" "),a("span",{staticClass:"out-of-page cl-red"},[n._v("限于内容篇幅，部分结果未予显示")])],1)],1)],1)},staticRenderFns:[]};var C=t("C7Lr")(v,k,!1,function(e){t("t2zo")},null,null).exports,z=t("HzJ8"),F=t.n(z),S=d.a.yyxs.qy,Y={components:{LoadingGif:g.a,List:r.a,Export:i.a,listCheck:p.a},mixins:[c.a,u.a],data:function(){return{expand_type:"sale",scope:"",defaultFiled:S,expandFiled:[],expandAmountFiled:[],tableHead:[],checkallShow:[],show_table:!0,getRowKeys:function(e){return e.guifanqiye},expandParams:{qiye:"",pageSize:20,page:1},expands:{expandsrow:[],element:null,expanCell:"",expandRes:{},erroCode:"200"},expandsLoading:!0,changeStyle:"",tableHeight:document.documentElement.clientHeight-48-60-60-50-88}},computed:o()({},Object(l.b)({tableconf:function(e){return e.Yyxs.tableconf},allBase:function(e){return e.Yyxs.allBase},nopms:function(e){return e.Yyxs.nopms},res3:function(e){return _.keys(e.Yyxs.res3).length?e.Yyxs.res3.res:[]},errocode:function(e){return e.Yyxs.error},listLoading:function(e){return e.Yyxs.listLoading},params:function(e){return e.Yyxs.putong},words:function(e){return e.Yyxs.gaoji},group:function(e){return e.Yyxs.shaixuan},extendCount:function(e){return e.Yyxs.extendCount},search_api_param:function(e){return e.Yyxs.search_api_param},param:function(e){return e.Yyxs.qy_param},accesstoken:function(e){return e.UserCenter.accesstoken},order:function(e){return e.Yyxs.order}}),{exportDefaultFiled:function(){var e=[],n=!0,t=!1,a=void 0;try{for(var o,s=F()(S);!(n=(o=s.next()).done);n=!0){var i=o.value;e.push(i)}}catch(e){t=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw a}}return e}}),methods:{sendGa:function(){this.nopms&&!this.nopms.ksh&&(window.ga("send","event","tab","click","yyxs_analy"),window._paq.push(["trackEvent","tab","click","yyxs_analy"]),this.$router.push({path:"/yyxs/analy"}))},showAnaly:function(e){this.$store.commit("Yyxs/dlfx_nowNav","企业分析"),this.$store.commit("Yyxs/dlfx_searchValQy",e),this.$store.commit("Yyxs/dlfx_searchListQy",[{label:e,value:e}])},init:function(){this.tableHead=this.defaultFiled.reduce(function(e,n){return n.checked&&e.push(n),e},[])},handleCurrentChange:function(e){this.param.page=e,e*this.param.pageSize<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleSizeChange:function(e){this.param.page=1,this.param.pageSize=e,e*this.param.page<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleRequest:function(e){var n=this;Store.dispatch("Yyxs/getGroupRes",{path:"/api/yyxs/byqiye",params:this.expandParams}).then(function(t){if(n.expandsLoading=!1,404==t.data.code)n.expands.erroCode="404";else if(200==t.data.code){n.expands.erroCode="200";var a=t.data.data;n.expands.expandRes=a;var o=_.clone(a.res);a.res=n.tableData(o),a.amount=n.tableAmountData(o),n.$set(e.row.second,[n.scope],a),$(".el-table").addClass("el-table--scrollable-y")}}).catch(function(e){n.expandsLoading=!1,n.expands.erroCode="500"})},expandCurrentChange:function(e,n){this.expandParams.page=e,this.handleRequest(n)},sortChange:function(e,n,t){var a=void 0;e.prop&&(a=e.prop+" "+("descending"==e.order?"desc":"asc")),this.param.order=a,Store.commit("Yyxs/order",y()({},this.$store.state.Yyxs.order,{qiye:a||null})),Store.dispatch("Yyxs/nomalSearch",{params:this.param})},getExpandRes:function(e,n,t,a,o){if(t){var s=void 0;switch(a){case"品种":s=1;break;case"区域":s=2;break;case"省份":s=3}if(this.expandFiled[0]={prop:"field",label:a,width:100,checked:!0},this.expandFiled[1]={prop:"dw",label:"销售额单位",width:100,checked:!0},this.expandParams.qiye=e,this.expandParams.tp=s,this.expandParams.pageSize=20,this.expandParams.page=1,this.expandParams.accesstoken=this.accesstoken,a="品种"===a?"药品名称":a,this.scope=o.column.property,o.row.second[this.scope])return void this.$set(o.row.second,[this.scope],o.row.second[this.scope]);this.expandsLoading=!0,this.handleRequest(o)}},tableData:function(e){var n=this,t=this.expandFiled.slice(0,2),a=[];return _.forEach(e,function(e,o){var s=e.year.split(","),i={};_.forEach(s,function(e){var a=e.split(":"),o=a[0],s=a[1];o&&(i[o]=n.echartsTooltipMoney(s),t.every(function(e){return e.label!=o})&&t.push({prop:o,label:o,width:100,checked:!0}))}),a.push(_.assign({field:e.field},i))}),t.sort(function(e,n){return e.label-n.label}),this.expandFiled=t,a},tableAmountData:function(e){var n=this,t=this.expandFiled.slice(0,1).concat({prop:"dw",label:"销售量单位",width:100,checked:!0}),a=[];return _.forEach(e,function(e,o){var s=e.year_amount.split(","),i={};_.forEach(s,function(e){var a=e.split(":"),o=a[0],s=a[1];o&&(i[o]=n.echartsTooltipMoney(s),t.every(function(e){return e.label!=o})&&t.push({prop:o,label:o,width:100,checked:!0}))}),a.push(_.assign({field:e.field},i))}),t.sort(function(e,n){return e.label-n.label}),this.expandAmountFiled=t,a},switchExpandType:function(e){this.expand_type=e},toggleRowExpansion:function(e,n,t,a){if("td"!==a.target.localName&&"cell"!==a.target.className&&(window.ga("send","event","txt","click","yyxs__byqiye_"+n.property),window._paq.push(["trackEvent","txt","click","yyxs__byqiye_"+n.property]),Number($(t).text().trim()))){var o=!1,s=($(t).index(),$(t).parent().index());this.expands.old_row>=0&&this.expands.old_row==s&&(o=!0),this.expands.old_row=s;var i=$(a.srcElement).closest("td");this.expands.element||(this.expands.element=i),this.expands.expandsrow=[],n.id==this.expands.expanCell&&o?(i.hasClass("active")?this.expands.element.removeClass("active"):this.expands.element.addClass("active"),this.expands.expanCell="",this.expandParams.page=1):(this.expands.expanCell=n.id,this.expands.expandsrow.push(e.guifanqiye),this.expands.element.removeClass("active"),i.addClass("active"),this.expands.element=i)}}},created:function(){this.init()},mounted:function(){},activated:function(){this.registerEven()},watch:{res3:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()}),this.expands={expandsrow:[],element:null,expanCell:"",expandRes:{},erroCode:"200"}},immediate:!0},tableHead:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()})},immediate:!0},checkedFiled:function(){var e=this;this.tableHead=[],this.defaultFiled=_.map(S,function(n){return-1!=e.checkedFiled.indexOf(n.prop)?(n.checked=!0,e.tableHead.push(n)):n.checked=!1,n})}}},E={render:function(){var e=this,n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"la-qy"},[a("List",{attrs:{loading:n.listLoading,nodata:n.res3&&!n.res3.length}},[a("div",{staticClass:"actions"},[a("span",{staticClass:"action-btn",class:{"abandon-click-method":n.nopms&&n.nopms.ksh},on:{click:n.sendGa}},[a("span",{staticClass:"icon iconfont"},[n._v("")]),n._v(" "),a("span",{staticStyle:{"line-height":"1"}},[n._v("智能分析")])]),n._v(" "),a("list-check",{staticStyle:{"text-align":"left"},attrs:{defaultFiled:n.defaultFiled,vuex_name:"Yyxs",showArray:n.tableHead},on:{changeTableHeader:function(t){return n.changeTableHeader(e,t)}}}),n._v(" "),a("Export",{staticStyle:{"text-align":"left"},attrs:{out_max:n.allBase.out_max,vuex_name:"Yyxs",api_name:"yyxs",max_num:n.extendCount.qiyeCount,defaultFiled:n.exportDefaultFiled,outdataAction:"qiye"}})],1),n._v(" "),n.show_table?a("el-table",{ref:"ElTable",staticClass:"table extensible-table",staticStyle:{width:"100%"},attrs:{height:n.tableHeight,data:n.res3,stripe:"",fixed:"","default-sort":n.order.qiye?n.defaultSort(n.order.qiye):{},"row-key":n.getRowKeys,"expand-row-keys":n.expands.expandsrow},on:{"sort-change":n.sortChange,"cell-click":n.toggleRowExpansion}},[a("el-table-column",{attrs:{type:"expand",width:"1"},scopedSlots:n._u([{key:"default",fn:function(e){return a("div",{staticClass:"table-expand",attrs:{type:"expand"}},[n.expandsLoading?a("LoadingGif",{attrs:{className:"list-in-loading",classNameImg:"little-size-loading",loadFlag:n.expandsLoading}}):a("div",[a("div",{staticClass:"sub-table-type"},[a("span",{class:["sub-table-type_item","sale"==n.expand_type?"set":""],on:{click:function(e){return n.switchExpandType("sale")}}},[n._v("销售额")]),n._v(" "),a("span",{class:["sub-table-type_item","amount"==n.expand_type?"set":""],on:{click:function(e){return n.switchExpandType("amount")}}},[n._v("销售量")])]),n._v(" "),"sale"==n.expand_type?[a("el-table",{ref:"expandtable",staticClass:"expand-table",staticStyle:{width:"100%"},attrs:{data:e.row.second[n.scope].res,fixed:""}},n._l(n.expandFiled,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.field_width||e.width||100,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return["dw"===e.prop?a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      万元\n                    ")]):a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      "+n._s(t.row[e.prop]||"-")+"\n                    ")])]}}],null,!0)})}),1),n._v(" "),e.row.second[n.scope].count>20?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":e.row.second[n.scope].page,"page-size":20,layout:"prev, next",total:e.row.second[n.scope].count,disabled:n.nopms.fy},on:{"current-change":function(t){return n.expandCurrentChange(t,e)}}}):n._e()]:n._e(),n._v(" "),"amount"==n.expand_type?[a("el-table",{ref:"expandtable",staticClass:"expand-table",staticStyle:{width:"100%"},attrs:{data:e.row.second[n.scope].amount,fixed:""}},n._l(n.expandAmountFiled,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.field_width||e.width||100,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return["dw"===e.prop?a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      万(片/粒/袋/支)\n                    ")]):a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      "+n._s(t.row[e.prop]||"-")+"\n                    ")])]}}],null,!0)})}),1),n._v(" "),e.row.second[n.scope].count>20?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":e.row.second[n.scope].page,"page-size":20,layout:"prev, next",total:e.row.second[n.scope].count,disabled:n.nopms.fy},on:{"current-change":function(t){return n.expandCurrentChange(t,e)}}}):n._e()]:n._e()],2)],1)}}],null,!1,2044609725)}),n._v(" "),n._l(n.tableHead,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,"min-width":e.width,sortable:e.sort,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return[a("div",{attrs:{title:t.row[e.prop]}},["qyfx"===e.prop?a("div",{on:{click:function(e){return n.showAnaly(t.row.qiye)}}},[a("router-link",{staticClass:"cl-blue",attrs:{target:"_blank",to:{path:"/yyxsdata",query:{type_id:2,tab:"2",qyname:t.row.guifanqiye}}}},[n._v("企业分析")])],1):a("div",{class:{"extensible-td":Number(t.row[e.prop])},on:{click:function(a){"guifanqiye"!=e.prop&&n.getExpandRes(t.row.guifanqiye,e.prop,t.row[e.prop],e.label,t)}}},[n._v("\n              "+n._s(t.row[e.prop])+"\n            ")])])]}}],null,!0)})})],2):n._e(),n._v(" "),a("div",{staticStyle:{positon:"relative"}},[n.extendCount.qiyeCount?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":n.param.page,"page-sizes":[20,30,50],"page-size":20,layout:"total, sizes, prev, pager, next",total:n.extendCount.qiyeCount,disabled:n.nopms.fy},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}}):n._e(),n._v(" "),a("span",{staticClass:"out-of-page cl-red"},[n._v("限于内容篇幅，部分结果未予显示")])],1)],1)],1)},staticRenderFns:[]};var L=t("C7Lr")(Y,E,!1,function(e){t("dSaI")},null,null).exports,A=d.a.yyxs.hxcf,T={components:{LoadingGif:g.a,List:r.a,Export:i.a,listCheck:p.a},mixins:[c.a,u.a],data:function(){return{expand_type:"sale",scope:"",defaultFiled:A,expandFiled:[],expandAmountFiled:[],tableHead:[],checkallShow:[],show_table:!0,getRowKeys:function(e){return e.zwylbm},expandParams:{zwylbm:"",pageSize:20,page:1},expands:{expandsrow:[],element:null,expanCell:"",expandRes:{},erroCode:"200"},expandsLoading:!0,changeStyle:"",tableHeight:document.documentElement.clientHeight-48-60-60-50-88}},computed:o()({},Object(l.b)({tableconf:function(e){return e.Yyxs.tableconf},allBase:function(e){return e.Yyxs.allBase},nopms:function(e){return e.Yyxs.nopms},res4:function(e){return _.keys(e.Yyxs.res4).length?e.Yyxs.res4.res:[]},errocode:function(e){return e.Yyxs.error},listLoading:function(e){return e.Yyxs.listLoading},params:function(e){return e.Yyxs.putong},words:function(e){return e.Yyxs.gaoji},group:function(e){return e.Yyxs.shaixuan},extendCount:function(e){return e.Yyxs.extendCount},param:function(e){return e.Yyxs.zwylbm_param},search_api_param:function(e){return e.Yyxs.search_api_param},accesstoken:function(e){return e.UserCenter.accesstoken},order:function(e){return e.Yyxs.order}})),methods:{sendGa:function(){this.nopms&&!this.nopms.ksh&&(window.ga("send","event","tab","click","yyxs_analy"),window._paq.push(["trackEvent","tab","click","yyxs_analy"]),this.$router.push({path:"/yyxs/analy"}))},showAnaly:function(e){this.$store.commit("Yyxs/dlfx_nowNav","检品分析"),this.$store.commit("Yyxs/dlfx_searchValYp",e),this.$store.commit("Yyxs/dlfx_searchListYp",[{label:e,value:e}])},init:function(){this.tableHead=this.defaultFiled.reduce(function(e,n){return n.checked&&e.push(n),e},[])},handleCurrentChange:function(e){this.param.page=e,e*this.param.pageSize<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleSizeChange:function(e){this.param.page=1,this.param.pageSize=e,e*this.param.page<=1500?($(".out-of-page").hide(),Store.dispatch("Yyxs/nomalSearch",{params:this.param})):$(".out-of-page").show()},handleRequest:function(e){var n=this;Store.dispatch("Yyxs/getGroupRes",{path:"/api/yyxs/byzwylbm",params:this.expandParams}).then(function(t){if(n.expandsLoading=!1,404==t.data.code)n.expands.erroCode="404";else if(200==t.data.code){n.expands.erroCode="200";var a=t.data.data;n.expands.expandRes=a;var o=_.clone(a.res);a.res=n.tableData(o),a.amount=n.tableAmountData(o),n.$set(e.row.second,[n.scope],a),$(".el-table").addClass("el-table--scrollable-y")}}).catch(function(e){n.expandsLoading=!1,n.expands.erroCode="500"})},expandCurrentChange:function(e,n){this.expandParams.page=e,this.handleRequest(n)},sortChange:function(e,n,t){var a=void 0;e.prop&&(a=e.prop+" "+("descending"==e.order?"desc":"asc")),this.param.order=a,Store.commit("Yyxs/order",y()({},this.$store.state.Yyxs.order,{zwylbm:a||null})),Store.dispatch("Yyxs/nomalSearch",{params:this.param})},getExpandRes:function(e,n,t,a,o){if(t){var s=void 0;switch(a){case"品种":s=1;break;case"生产企业":s=2;break;case"区域":s=3;break;case"省份":s=4}if(this.expandFiled[0]={prop:"field",label:"品种"===a?"药品名称":a,width:100,checked:!0},this.expandFiled[1]={prop:"dw",label:"销售额单位",width:100,checked:!0},this.expandParams.zwylbm=e,this.expandParams.tp=s,this.expandParams.pageSize=20,this.expandParams.page=1,this.expandParams.accesstoken=this.accesstoken,this.scope=o.column.property,o.row.second[this.scope])return void this.$set(o.row.second,[this.scope],o.row.second[this.scope]);this.expandsLoading=!0,this.handleRequest(o)}},tableData:function(e){var n=this,t=this.expandFiled.slice(0,2),a=[];return _.forEach(e,function(e,o){var s=e.year.split(","),i={};_.forEach(s,function(e){var a=e.split(":"),o=a[0],s=a[1];o&&(i[o]=n.echartsTooltipMoney(s),t.every(function(e){return e.label!=o})&&t.push({prop:o,label:o,width:100,checked:!0}))}),a.push(_.assign({field:e.field},i))}),t.sort(function(e,n){return e.label-n.label}),this.expandFiled=t,a},tableAmountData:function(e){var n=this,t=this.expandFiled.slice(0,1).concat({prop:"dw",label:"销售量单位",width:100,checked:!0}),a=[];return _.forEach(e,function(e,o){var s=e.year_amount.split(","),i={};_.forEach(s,function(e){var a=e.split(":"),o=a[0],s=a[1];o&&(i[o]=n.echartsTooltipMoney(s),t.every(function(e){return e.label!=o})&&t.push({prop:o,label:o,width:100,checked:!0}))}),a.push(_.assign({field:e.field},i))}),t.sort(function(e,n){return e.label-n.label}),this.expandAmountFiled=t,a},switchExpandType:function(e){this.expand_type=e},toggleRowExpansion:function(e,n,t,a){if("td"!==a.target.localName&&"cell"!==a.target.className&&(window.ga("send","event","txt","click","yyxs__byzwylbm_"+n.property),window._paq.push(["trackEvent","txt","click","yyxs__byzwylbm_"+n.property]),Number($(t).text().trim()))){var o=!1,s=($(t).index(),$(t).parent().index());this.expands.old_row>=0&&this.expands.old_row==s&&(o=!0),this.expands.old_row=s;var i=$(t);this.expands.element||(this.expands.element=i),this.expands.expandsrow=[],n.id==this.expands.expanCell&&o?(i.hasClass("active")?this.expands.element.removeClass("active"):this.expands.element.addClass("active"),this.expands.expanCell="",this.expandParams.page=1):(this.expands.expanCell=n.id,this.expands.expandsrow.push(e.zwylbm),this.expands.element.removeClass("active"),i.addClass("active"),this.expands.element=i)}}},created:function(){this.init()},mounted:function(){},activated:function(){this.registerEven()},watch:{res4:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()}),this.expands={expandsrow:[],element:null,expanCell:"",expandRes:{},erroCode:"200"}},immediate:!0},tableHead:{handler:function(){var e=this;this.$nextTick(function(){e.registerEven()})},immediate:!0},checkedFiled:function(){var e=this;this.tableHead=[],this.defaultFiled=_.map(A,function(n){return-1!=e.checkedFiled.indexOf(n.prop)?(n.checked=!0,e.tableHead.push(n)):n.checked=!1,n})}}},q={render:function(){var e=this,n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"la-ypmc"},[a("List",{attrs:{loading:n.listLoading,nodata:n.res4&&!n.res4.length}},[a("div",{staticClass:"actions"},[a("span",{staticClass:"action-btn",class:{"abandon-click-method":n.nopms&&n.nopms.ksh},on:{click:n.sendGa}},[a("span",{staticClass:"icon iconfont"},[n._v("")]),n._v(" "),a("span",{staticStyle:{"line-height":"1"}},[n._v("智能分析")])]),n._v(" "),a("list-check",{staticStyle:{"text-align":"left"},attrs:{defaultFiled:n.defaultFiled,vuex_name:"Yyxs",showArray:n.tableHead},on:{changeTableHeader:function(t){return n.changeTableHeader(e,t)}}}),n._v(" "),a("Export",{staticStyle:{"text-align":"left"},attrs:{out_max:n.allBase.out_max,vuex_name:"Yyxs",api_name:"yyxs",max_num:n.extendCount.zwylbmCount,defaultFiled:n.defaultFiled,outdataAction:"zwylbm"}})],1),n._v(" "),n.show_table?a("el-table",{ref:"ElTable",staticClass:"table extensible-table",staticStyle:{width:"100%"},attrs:{height:n.tableHeight,data:n.res4,stripe:"",fixed:"","row-key":n.getRowKeys,"expand-row-keys":n.expands.expandsrow,"default-sort":n.order.zwylbm?n.defaultSort(n.order.zwylbm):{}},on:{"cell-click":n.toggleRowExpansion,"sort-change":n.sortChange}},[a("el-table-column",{attrs:{type:"expand",width:"1"},scopedSlots:n._u([{key:"default",fn:function(e){return a("div",{staticClass:"table-expand",attrs:{type:"expand"}},[n.expandsLoading?a("LoadingGif",{attrs:{className:"list-in-loading",classNameImg:"little-size-loading",loadFlag:n.expandsLoading}}):a("div",[a("div",{staticClass:"sub-table-type"},[a("span",{class:["sub-table-type_item","sale"==n.expand_type?"set":""],on:{click:function(e){return n.switchExpandType("sale")}}},[n._v("销售额")]),n._v(" "),a("span",{class:["sub-table-type_item","amount"==n.expand_type?"set":""],on:{click:function(e){return n.switchExpandType("amount")}}},[n._v("销售量")])]),n._v(" "),"sale"==n.expand_type?[a("el-table",{ref:"expandtable",staticClass:"expand-table",staticStyle:{width:"100%"},attrs:{data:e.row.second[n.scope].res,fixed:""}},n._l(n.expandFiled,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.field_width||e.width||100,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return["dw"===e.prop?a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      万元\n                    ")]):a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      "+n._s(t.row[e.prop]||"-")+"\n                    ")])]}}],null,!0)})}),1),n._v(" "),e.row.second[n.scope].count>20?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":e.row.second[n.scope].page,"page-size":20,layout:"prev, next",total:e.row.second[n.scope].count,disabled:n.nopms.fy},on:{"current-change":function(t){return n.expandCurrentChange(t,e)}}}):n._e()]:n._e(),n._v(" "),"amount"==n.expand_type?[a("el-table",{ref:"expandtable",staticClass:"expand-table",staticStyle:{width:"100%"},attrs:{data:e.row.second[n.scope].amount,fixed:""}},n._l(n.expandAmountFiled,function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.field_width||e.width||100,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return["dw"===e.prop?a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      万(片/粒/袋/支)\n                    ")]):a("div",{attrs:{title:t.row[e.prop]}},[n._v("\n                      "+n._s(t.row[e.prop]||"-")+"\n                    ")])]}}],null,!0)})}),1),n._v(" "),e.row.second[n.scope].count>20?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":e.row.second[n.scope].page,"page-size":20,layout:"prev, next",total:e.row.second[n.scope].count,disabled:n.nopms.fy},on:{"current-change":function(t){return n.expandCurrentChange(t,e)}}}):n._e()]:n._e()],2)],1)}}],null,!1,2044609725)}),n._v(" "),n._l(n.tableHead,function(e){return a("el-table-column",{key:e.prop,attrs:{prop:e.prop,sortable:e.sort,"min-width":e.width,label:e.label},scopedSlots:n._u([{key:"default",fn:function(t){return[a("div",{attrs:{title:t.row[e.prop]}},["ypfx"===e.prop?a("div",{on:{click:function(e){return n.showAnaly(t.row.zwylbm)}}},[a("router-link",{staticClass:"cl-blue",attrs:{target:"_blank",to:{path:"/yyxsdata",query:{type_id:2,tab:"1",ypname:t.row.zwylbm,type:"1",subType:1}}}},[n._v("药品分析")])],1):a("div",{class:{"extensible-td":Number(t.row[e.prop])},on:{click:function(a){"zwylbm"!=e.prop&&n.getExpandRes(t.row.zwylbm,e.prop,t.row[e.prop],e.label,t)}}},[n._v("\n              "+n._s(t.row[e.prop])+"\n            ")])])]}}],null,!0)})})],2):n._e(),n._v(" "),a("div",{staticStyle:{positon:"relative"}},[n.extendCount.zwylbmCount?a("el-pagination",{class:{"abandon-click-method":n.nopms.fy},attrs:{"current-page":n.param.page,"page-sizes":[20,30,50],"page-size":20,layout:"total, sizes, prev, pager, next",total:n.extendCount.zwylbmCount,disabled:n.nopms.fy},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}}):n._e(),n._v(" "),a("span",{staticClass:"out-of-page cl-red"},[n._v("限于内容篇幅，部分结果未予显示")])],1)],1)],1)},staticRenderFns:[]};var B={components:{ListOne:m,ListTwo:C,ListThree:L,ListFour:t("C7Lr")(T,q,!1,function(e){t("oOaS")},null,null).exports},data:function(){return{}},computed:o()({},Object(l.b)({activeTabName:function(e){return e.Yyxs.tabname},extendCount:function(e){return e.Yyxs.extendCount},res1:function(e){return e.Yyxs.res1},res2:function(e){return e.Yyxs.res2},res3:function(e){return e.Yyxs.res3},res4:function(e){return e.Yyxs.res4},nopms:function(e){return e.Yyxs.nopms},allBase:function(e){return e.Yyxs.allBase}})),methods:{handleClickTag:function(e,n){window.ga("send","event","tab","click","yyxs_"+e.name),window._paq.push(["trackEvent","tab","click","yyxs_"+e.name]);var t="/api/yyxs/"+e.name;Store.commit("Yyxs/tabname",e.name),Store.commit("Yyxs/path",t),("listname"===e.name&&!_.keys(this.res2.res).length||"listqiye"===e.name&&!_.keys(this.res3).length||"listyear"===e.name&&!_.keys(this.res1).length||"listzwylbm"===e.name&&!_.keys(this.res4).length)&&Store.dispatch("Yyxs/nomalSearch",{path:t,queryToPutong:!1})}},created:function(){var e=this;setTimeout(function(){var n=sessionStorage.getItem("hashLocation");window._paq.push(["setCustomUrl","https://"+n]),window._paq.push(["trackPageView",e.allBase.dbname]),window._paq.push(["setDocumentTitle",e.allBase.dbname])},1e3)}},D={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-tabs",{staticClass:"la-list",attrs:{value:e.activeTabName},on:{"tab-click":e.handleClickTag}},[t("el-tab-pane",{staticClass:"slh-pane",attrs:{label:e.getTabLabel("按销售年份浏览",e.extendCount.listCount),name:"listyear"}},[t("ListOne")],1),e._v(" "),t("el-tab-pane",{class:{"abandon-click-method":e.nopms.listname},attrs:{label:e.getTabLabel("按药品名称浏览",e.extendCount.nameCount),name:"listname",disabled:e.nopms.listname}},[t("ListTwo")],1),e._v(" "),t("el-tab-pane",{class:{"abandon-click-method":e.nopms.listzwylbm},attrs:{label:e.getTabLabel("按活性成分浏览",e.extendCount.zwylbmCount),name:"listzwylbm",disabled:e.nopms.listzwylbm}},[t("ListFour")],1),e._v(" "),t("el-tab-pane",{class:{"abandon-click-method":e.nopms.listqiye},attrs:{label:e.getTabLabel("按企业名称浏览",e.extendCount.qiyeCount),name:"listqiye",disabled:e.nopms.listqiye}},[t("ListThree")],1)],1)],1)},staticRenderFns:[]};var P=t("C7Lr")(B,D,!1,function(e){t("0thU")},null,null);n.default=P.exports},xns6:function(e,n,t){var a=t("L4zZ");(e.exports=t("UTlt")(!1)).push([e.i,"\n.el-input__inner::-webkit-input-placeholder {\n  color: #A9ADB7;\n}\n.el-input__inner::-moz-placeholder {\n  /* Mozilla Firefox 19+ */\n  color: #A9ADB7;\n}\n.el-input__inner:-moz-placeholder {\n  /* Mozilla Firefox 4 to 18 */\n  color: #A9ADB7;\n}\n.el-input__inner:-ms-input-placeholder {\n  /* Internet Explorer 10-11 */\n  color: #A9ADB7;\n}\n.el-checkbox__label {\n  padding-left: 6px;\n  font-size: 12px;\n}\n.el-checkbox {\n  font-size: 12px;\n  color: #545B6D;\n}\n.el-input {\n  font-size: 12px;\n}\ninput.el-input__inner {\n  border-color: #DFE5F1;\n}\nbutton.border-color {\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner {\n  width: 12px;\n  height: 12px;\n  border-color: #DFE5F1;\n}\n.el-checkbox__inner::after {\n  top: 0;\n}\n.el-select-dropdown__item {\n  font-size: 12px;\n}\n/*主色为蓝色系*/\n/* @PrimaryBackgroundColor: hsl(hue(@PrimaryColor), 100%, 96%); */\n/*字体颜色*/\n/* 通用头部head部分样式 */\n/* @BorderColor: hsl(hue(@PrimaryColor), 20%, 80%); */\n/* table */\n/* @ThBackgroundColor: hsl(hue(@PrimaryColor)+12, 33%, 96%); */\n/* detail列表详情下的table */\n/* detail列表详情下的slide-section */\n/* detail列表详情下的slide-section 时光轴样式 */\n.la-qy {\n  min-height: 100px;\n}\n.la-qy .no-data-msg {\n  width: 100%;\n  text-align: center;\n  font-weight: bold;\n}\n.extensible-table .extensible-td {\n  text-decoration: underline;\n  cursor: pointer;\n}\n.extensible-table .extensible-td:hover {\n  color: #4877e8;\n  font-weight: normal;\n}\n.extensible-table tr.el-table__row--striped td.active {\n  color: #4877e8;\n  font-weight: 600;\n  background: url("+a(t("2+JL"))+") no-repeat 30px bottom #f5f8fb !important;\n  border: none;\n}\n.extensible-table td {\n  position: relative;\n}\n.extensible-table td .el-icon-caret-top {\n  font-size: 20px;\n  display: none;\n}\n.extensible-table td.active {\n  color: #4877e8;\n  font-weight: 600;\n  background: url("+a(t("2+JL"))+") no-repeat 30px bottom;\n  border: none;\n}\n.sub-table-type {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 5px 10px;\n}\n.sub-table-type_item {\n  width: 50px;\n  height: 24px;\n  line-height: 24px;\n  font-size: 13px;\n  text-align: center;\n  margin-right: 10px;\n  border-radius: 4px;\n  border: 1px solid #4877e8;\n  color: #4877e8;\n  cursor: pointer;\n}\n.sub-table-type_item.set {\n  color: #fff;\n  background-color: #4877e8;\n}\n.el-table__expanded-cell .el-table th.is-leaf {\n  background-color: #EAEEF9 !important;\n}\n",""])}});