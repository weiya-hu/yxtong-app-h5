webpackJsonp([127],{"7P1D":function(n,t,e){var a=e("SJYP");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("FIqI")("1f728372",a,!0,{})},SJYP:function(n,t,e){(n.exports=e("UTlt")(!1)).push([n.i,'\n.container[data-v-7fe6ceb3] {\n  width: 99%;\n  min-width: 1200px;\n  margin: 0 auto;\n}\n.container .headliner[data-v-7fe6ceb3] {\n  height: 30px;\n  width: 100%;\n}\n.container .headliner span[data-v-7fe6ceb3] {\n  line-height: 1;\n}\n.container .headliner .right[data-v-7fe6ceb3] {\n  margin-left: 15px;\n  font-size: 14px;\n}\n.container .headliner .right a[data-v-7fe6ceb3] {\n  color: #002fa7;\n}\n.container .headliner .ico[data-v-7fe6ceb3] {\n  margin-right: 5px;\n}\n.table[data-v-7fe6ceb3] {\n  max-width: 100%;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  position: relative;\n  overflow: auto;\n  height: calc(100vh - 185px);\n  padding: 0 3px 0 0;\n}\n.table[data-v-7fe6ceb3]::-webkit-scrollbar-thumb {\n  width: 5px;\n}\n.table[data-v-7fe6ceb3]::-webkit-scrollbar-track {\n  width: 5px;\n}\n.row[data-v-7fe6ceb3] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  min-height: 74px;\n}\n.row.table-head[data-v-7fe6ceb3] {\n  min-height: 60px;\n  min-height: 0;\n}\n.row .row-label[data-v-7fe6ceb3] {\n  background-color: #fafbfd;\n  font-size: 14px;\n  font-weight: bold;\n  color: #5c6973;\n  border-right-color: #fff;\n}\n.col[data-v-7fe6ceb3] {\n  width: 180px;\n  min-width: 180px;\n  border: 1px solid #e1e1e1;\n  padding: 15px;\n  background-color: #fff;\n  border-left: 0;\n  border-top: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  text-align: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  font-size: 13px;\n  color: #333;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.col.insert-col[data-v-7fe6ceb3] {\n  width: 300px;\n  min-width: 300px;\n}\n.col .icon[data-v-7fe6ceb3] {\n  position: absolute;\n  width: 16px;\n  height: 16px;\n  background-image: url(/static/imgs/globaldrugs/close.png);\n  background-size: cover;\n  top: 5px;\n  right: 5px;\n}\n.col .col-tag[data-v-7fe6ceb3] {\n  position: absolute;\n  font-size: 12px;\n  line-height: 1;\n  padding: 2px;\n  border-radius: 2px;\n  background-color: #ffa914;\n  color: #fff;\n  top: 0;\n  left: 0;\n  font-weight: normal;\n}\n.col.col-dif[data-v-7fe6ceb3] {\n  background-color: #ebeef5;\n}\n.col span[data-v-7fe6ceb3] {\n  display: inline-block;\n  line-height: 20px;\n  word-break: break-all;\n}\n.col[data-v-7fe6ceb3]:first-child {\n  border-left: 1px solid #ececec !important;\n}\n.sticky-left[data-v-7fe6ceb3] {\n  position: sticky;\n  left: 0;\n}\n.sticky-top[data-v-7fe6ceb3] {\n  position: sticky;\n  top: 0;\n  z-index: 3;\n}\n.table-head[data-v-7fe6ceb3] {\n  z-index: 1;\n  min-height: 60px;\n}\n.table-head .col[data-v-7fe6ceb3] {\n  color: #333;\n  font-weight: bold;\n  font-size: 14px;\n  border-radius: 3px;\n  padding: 20px 15px 15px;\n  border: none;\n  -webkit-box-shadow: 0px 2px 5px 0px rgba(9, 20, 79, 0.1);\n          box-shadow: 0px 2px 5px 0px rgba(9, 20, 79, 0.1);\n}\n.table-head :not(.sticky-top).col[data-v-7fe6ceb3] {\n  position: relative;\n}\n.wrapper-head[data-v-7fe6ceb3] {\n  height: 50px;\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 10px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.wrapper-head .name[data-v-7fe6ceb3] {\n  font-size: 20px;\n  color: #333;\n  font-family: SourceHanSansCN-Bold, SourceHanSansCN;\n  font-weight: bold;\n}\n.wrapper-head .tag[data-v-7fe6ceb3] {\n  height: 20px;\n  font-size: 12px;\n  border: 1px solid #002fa7;\n  color: #002fa7;\n  margin-left: 10px;\n  border-radius: 3px;\n  padding: 2px 5px;\n}\n.wrapper-head .tag.green[data-v-7fe6ceb3] {\n  background-color: #9dcc40;\n  border-color: #9dcc40;\n  color: #fff;\n}\n.flex[data-v-7fe6ceb3] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.alert[data-v-7fe6ceb3] {\n  z-index: 9999;\n  display: none;\n  width: 175px;\n  height: 105px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -52.5px;\n  margin-left: -87.5px;\n}\n.alert .right[data-v-7fe6ceb3] {\n  position: relative;\n  width: 175px;\n  height: 105px;\n  background: url("/static/imgs/usercenter/alert/right.png") no-repeat;\n}\n.alert .right span[data-v-7fe6ceb3] {\n  position: absolute;\n  bottom: 22px;\n  left: 0px;\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 14px;\n  font-weight: bold;\n}\n.alert .wrong[data-v-7fe6ceb3] {\n  position: relative;\n  width: 175px;\n  height: 105px;\n  background: url("/static/imgs/usercenter/alert/wrong.png") no-repeat;\n}\n.alert .wrong span[data-v-7fe6ceb3] {\n  position: absolute;\n  bottom: 22px;\n  left: 0px;\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-size: 14px;\n  font-weight: bold;\n}\n.alert div[data-v-7fe6ceb3] {\n  display: none;\n}\n.drug-item .drug-item_durgname[data-v-7fe6ceb3] {\n  font-size: 13px;\n  font-weight: bold;\n  color: #333;\n  height: 25px;\n  line-height: 25px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.drug-item .drug-item_company[data-v-7fe6ceb3] {\n  font-size: 12px;\n  color: #a3a3a3;\n  height: 18px;\n  line-height: 18px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n[data-v-7fe6ceb3] .el-card__body {\n  padding: 10px;\n}\n',""])},XWUV:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("4YfN"),i=e.n(a),o=e("3cXf"),r=e.n(o),l=e("bSIt"),s=e("LirJ"),c=e.n(s),d=e("84iU"),p=e.n(d),g={name:"globaldrug_contrast",data:function(){return{nowDate:c()().format("YYYY-MM-DD"),newcoltext:"",tdata:[],labeldata:[{name:"属性名称",key:"name"},{name:"药品分类",key:"leixing2"},{name:"靶点",key:"targets_abbr"},{name:"已批准适应症",key:"pizhun_indication"},{name:"在研适应症",key:"zaiyan_indication"},{name:"终止适应症",key:"zhongzhi_indication"},{name:"原研单位",key:"company"},{name:"合作企业",key:"coo_company"},{name:"许可单位",key:"per_company"},{name:"全球最高状态",key:"phase1"},{name:"中国最高状态",key:"phase2"},{name:"已批准企业数",key:"pizhun_company"},{name:"在研企业数",key:"zaiyan_company"},{name:"终止企业数",key:"zhongzhi_company"},{name:"最新状态时间",key:"date"}],baseCol:{leixing2:"",targets_abbr:"",pizhun_indication:"",zaiyan_indication:"",zhongzhi_indication:"",company:"",coo_company:"",per_company:"",phase1:"",phase2:"",pizhun_company:"",zaiyan_company:"",zhongzhi_company:"",date:""},loading:!1}},methods:{toggleAlert:function(n){$(".alert").fadeIn(),$(".alert").find("."+n).fadeIn(),setTimeout(function(){$(".alert").fadeOut(),$(".alert").find("."+n).fadeOut()},2e3)},hideAlerts:function(){$(".alert").hide()},initData:function(){var n=this;this.loading=!0;var t=localStorage.getItem("globaldrugsContrast")&&JSON.parse(localStorage.getItem("globaldrugsContrast"))||[];(t=t.map(function(n){return{name:n.drugname_standard,company:n.company_standard}})).length?p()({method:"post",url:"/api/globaldrugs/compare",data:{drugname:r()(t)}}).then(function(t){200==t.data.code&&(n.tdata=t.data.data,t.data.data.length&&(n.baseCol=t.data.data[0]))}).finally(function(){n.loading=!1}):this.loading=!1},exportExcel:function(){var n=this;this.loading=!0;var t=localStorage.getItem("globaldrugsContrast")&&JSON.parse(localStorage.getItem("globaldrugsContrast"))||[];if(t.length){var e=r()(t.map(function(n){return{name:n.drugname_standard,company:n.company_standard}}));p()({method:"post",url:"/api/globaldrugs/compare",responseType:"blob",params:{isExport:1},data:{drugname:e}}).then(function(n){saveAs(n.data,decodeURIComponent(n.headers.file_name_urlencode))}).finally(function(){n.loading=!1})}else this.toggleAlert("wrong3")},querySearch:function(n,t){n.length<2?t([]):p()({method:"get",url:"/api/globaldrugs/input",params:_.assign({drugname1:n},{accesstoken:GETCOOKIEFUN("accesstoken")})}).then(function(n){if(200==n.data.code){var e=n.data.data.map(function(n){return{value:n}});t(e)}else t([])})},handleSelect:function(n){var t=this;this.loading=!0;var e=localStorage.getItem("globaldrugsContrast")?JSON.parse(localStorage.getItem("globaldrugsContrast")):[];if(e.findIndex(function(t){return t.company_standard==n.value.company_standard&&t.drugname_standard==n.value.drugname_standard})>-1)return this.toggleAlert("wrong2"),this.newcoltext="",void(this.loading=!1);p()({method:"post",url:"/api/globaldrugs/compare",data:{drugname:r()([n.value].map(function(n){return{name:n.drugname_standard,company:n.company_standard}}))}}).then(function(a){200==a.data.code?(t.tdata=t.tdata.concat(a.data.data),t.newcoltext="",t.$nextTick(function(){t.$refs.insert&&t.$refs.insert[0].scrollIntoView({block:"end"})}),e.push(n.value),localStorage.setItem("globaldrugsContrast",r()(e))):(t.toggleAlert("wrong1"),t.newcoltext="")}).finally(function(){t.loading=!1})},del:function(n){this.tdata.splice(n,1);var t=JSON.parse(localStorage.getItem("globaldrugsContrast"));t.splice(n,1),localStorage.setItem("globaldrugsContrast",r()(t))},diffCol:function(n,t){return this.baseCol[n]!==t}},computed:i()({},Object(l.b)("Globaldrugs",["allBase"])),mounted:function(){var n=this;Store.dispatch("Globaldrugs/getBaseInfo").then(function(){n.vueTogglePmsTooltip(),document.title=n.allBase.dbname+"-药品对比"}),this.initData()}},f={render:function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"contrast"},[e("div",{staticClass:"wrapper-head",staticStyle:{"box-shadow":"0px 1px 10px 0px rgba(9, 20, 79, 0.1)"}},[n._m(0),n._v(" "),e("div",{staticClass:"wrapper-head_right"},[e("span",{staticStyle:{color:"#333"}},[n._v("\n        当前位置：\n        "),e("router-link",{attrs:{to:"/home"}},[n._v("首页")]),n._v("\n        >\n        "),e("router-link",{attrs:{to:"/globaldrugs"}},[n._v("全球药物")]),n._v("\n        >\n        "),e("i",{staticStyle:{"font-style":"normal",color:"#002fa7"}},[n._v("药物对比")])],1)])]),n._v(" "),e("el-card",{directives:[{name:"waiting",rawName:"v-waiting",value:n.loading,expression:"loading"}],staticClass:"container"},[e("div",{staticClass:"flex headliner",staticStyle:{"margin-bottom":"20px"}},[e("div",{staticClass:"flex"},[e("span",{staticStyle:{"font-size":"14px",color:"#333"}},[n._v("当前共选择"),e("b",{staticStyle:{"font-size":"16px",color:"#ffa914"}},[n._v(n._s(n.tdata.length))]),n._v("款药品进行对比")]),n._v(" "),e("span",{staticStyle:{"margin-left":"10px",color:"#5c6973","font-size":"12px"}},[n._v("注意：最多可添加10个药品。")])]),n._v(" "),e("div",{staticClass:"flex",staticStyle:{"margin-left":"140px"}},[e("div",{staticClass:"flex right"},[e("img",{staticClass:"ico",staticStyle:{width:"14px",height:"14px"},attrs:{src:"/static/imgs/globaldrugs/time.png"}}),e("span",[n._v("对比时间："+n._s(n.nowDate))])]),n._v(" "),e("a",{staticClass:"flex right",on:{click:n.exportExcel}},[e("img",{staticClass:"ico",staticStyle:{width:"14px",height:"14px"},attrs:{src:"/static/imgs/globaldrugs/export.png"}}),e("span",{staticStyle:{color:"#002fa7"}},[n._v("导出Excel")])])])]),n._v(" "),e("div",{staticClass:"table"},n._l(n.labeldata,function(t,a){return e("div",{key:t.key,class:["row",0==a?"table-head sticky-top":""]},[e("div",{class:["col","sticky-left",0==a?"sticky-top ":"row-label"]},[e("span",[n._v(n._s(t.name))])]),n._v(" "),n._l(n.tdata,function(i,o){return e("div",{key:a+"_"+o,class:["col",a>0&&o>0&&n.diffCol(t.key,i[t.key])?"col-dif":""]},["name"!==t.key?e("span",[n._v("\n            "+n._s(i[t.key]?i[t.key]:0===i[t.key]?0:" — ")+"\n          ")]):e("span",[n._v(n._s(i.zwname+i.drugname_standard))]),n._v(" "),0==a&&o>0?e("i",{staticClass:"icon",staticStyle:{color:"#f56c6c",cursor:"pointer"},on:{click:function(t){return n.del(o)}}}):n._e(),n._v(" "),0==a&&0==o?e("span",{staticClass:"col-tag"},[n._v("基础药品")]):n._e(),n._v(" "),0==a&&o>0?e("span",{staticClass:"col-tag"},[n._v("对比药品"+n._s(o))]):n._e()])}),n._v(" "),n.tdata.length<10?e("div",{staticClass:"col insert-col"},[0==a?e("div",{ref:"insert",refInFor:!0},[e("el-autocomplete",{staticStyle:{width:"250px"},attrs:{size:"mini","fetch-suggestions":n.querySearch,placeholder:"请输入并选择内容","trigger-on-focus":!1,clearable:"",valueKey:"drugname_standard"},on:{select:n.handleSelect},scopedSlots:n._u([{key:"default",fn:function(t){var a=t.item;return[e("div",{staticClass:"drug-item"},[e("div",{staticClass:"drug-item_durgname",attrs:{title:a.value.drugname_standard}},[n._v("\n                    "+n._s(a.value.drugname_standard)+"\n                  ")]),n._v(" "),e("div",{staticClass:"drug-item_company",attrs:{title:a.value.company_standard}},[n._v("\n                    "+n._s(a.value.company_standard)+"\n                  ")])])]}}],null,!0),model:{value:n.newcoltext,callback:function(t){n.newcoltext=t},expression:"newcoltext"}})],1):n._e()]):n._e()],2)}),0)]),n._v(" "),e("div",{staticClass:"alert",on:{click:function(t){return n.hideAlerts()}}},[n._m(1),n._v(" "),n._m(2),n._v(" "),n._m(3),n._v(" "),n._m(4),n._v(" "),n._m(5),n._v(" "),n._m(6),n._v(" "),n._m(7),n._v(" "),n._m(8)])],1)},staticRenderFns:[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrapper-head_left"},[t("span",{staticClass:"name"},[this._v("全球药物对比")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"right right1"},[t("span",[this._v("订阅成功")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong1"},[t("span",[this._v("未找到数据!")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong2"},[t("span",[this._v("已存在，请重新选择！")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong3"},[t("span",[this._v("请先添加对比数据！")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong4"},[t("span",[this._v("请选择接收方式")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong5"},[t("span",[this._v("请输入邮箱")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong6"},[t("span",[this._v("请输入正确的邮箱")])])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"wrong wrong7"},[t("span",[this._v("该功能正在建设中")])])}]};var h=e("C7Lr")(g,f,!1,function(n){e("7P1D")},"data-v-7fe6ceb3",null);t.default=h.exports}});